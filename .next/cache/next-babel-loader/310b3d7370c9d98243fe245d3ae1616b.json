{"ast":null,"code":"//pelo nex pode usar o import\nimport { GoogleSpreadsheet } from 'google-spreadsheet';\nimport credentials from '../../credentials.json'; //const { GoogleSpreadsheet } = require('google-spreadsheet')\n//const credentials = require('../../credentials.json')\n\nconst doc = new GoogleSpreadsheet(process.env.DOC);\nexport default (async (req, res) => {\n  try {\n    await doc.useServiceAccountAuth(credentials);\n    await doc.loadInfo();\n    const sheet = doc.sheetsByIndex[1];\n    await sheet.loadCells('A3:B3');\n    const celpromo = sheet.getCell(2, 0);\n    const celltexto = sheet.getCell(2, 1);\n    res.end(JSON.stringify({\n      showCupon: celpromo.value === 'VERDADEIRO',\n      message: celltexto.value\n    }));\n  } catch (err) {\n    res.end(JSON.stringify({\n      showCupon: false,\n      message: ''\n    }));\n  }\n});","map":{"version":3,"sources":["H:/Projetos/palpit-box/pages/api/get-promo.js"],"names":["GoogleSpreadsheet","credentials","doc","process","env","DOC","req","res","useServiceAccountAuth","loadInfo","sheet","sheetsByIndex","loadCells","celpromo","getCell","celltexto","end","JSON","stringify","showCupon","value","message","err"],"mappings":"AACA;AACA,SAAQA,iBAAR,QAAgC,oBAAhC;AACA,OAAOC,WAAP,MAAwB,wBAAxB,C,CAEA;AACA;;AAGA,MAAMC,GAAG,GAAG,IAAIF,iBAAJ,CAAsBG,OAAO,CAACC,GAAR,CAAYC,GAAlC,CAAZ;AAEA,gBAAe,OAAMC,GAAN,EAAUC,GAAV,KAAiB;AAE5B,MAAG;AACC,UAAML,GAAG,CAACM,qBAAJ,CAA0BP,WAA1B,CAAN;AACA,UAAMC,GAAG,CAACO,QAAJ,EAAN;AAEA,UAAMC,KAAK,GAAGR,GAAG,CAACS,aAAJ,CAAkB,CAAlB,CAAd;AACA,UAAMD,KAAK,CAACE,SAAN,CAAgB,OAAhB,CAAN;AAEA,UAAMC,QAAQ,GAAGH,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAAjB;AACA,UAAMC,SAAS,GAAGL,KAAK,CAACI,OAAN,CAAc,CAAd,EAAgB,CAAhB,CAAlB;AAGAP,IAAAA,GAAG,CAACS,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,SAAS,EAAGN,QAAQ,CAACO,KAAT,KAAmB,YADZ;AAEnBC,MAAAA,OAAO,EAAGN,SAAS,CAACK;AAFD,KAAf,CAAR;AAIH,GAfD,CAeC,OAAME,GAAN,EAAU;AACPf,IAAAA,GAAG,CAACS,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,SAAS,EAAG,KADO;AAEnBE,MAAAA,OAAO,EAAM;AAFM,KAAf,CAAR;AAIH;AAEJ,CAxBD","sourcesContent":["\r\n//pelo nex pode usar o import\r\nimport {GoogleSpreadsheet} from 'google-spreadsheet'\r\nimport credentials from '../../credentials.json'\r\n\r\n//const { GoogleSpreadsheet } = require('google-spreadsheet')\r\n//const credentials = require('../../credentials.json')\r\n\r\n\r\nconst doc = new GoogleSpreadsheet(process.env.DOC)\r\n\r\nexport default async(req,res) =>{\r\n\r\n    try{\r\n        await doc.useServiceAccountAuth(credentials)\r\n        await doc.loadInfo()\r\n        \r\n        const sheet = doc.sheetsByIndex[1]\r\n        await sheet.loadCells('A3:B3')\r\n       \r\n        const celpromo = sheet.getCell(2 ,0)       \r\n        const celltexto = sheet.getCell(2,1)\r\n        \r\n\r\n        res.end(JSON.stringify({\r\n            showCupon : celpromo.value === 'VERDADEIRO',\r\n            message : celltexto.value\r\n        }))\r\n    }catch(err){\r\n        res.end(JSON.stringify({\r\n            showCupon : false,\r\n            message :    ''    \r\n       }))\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}