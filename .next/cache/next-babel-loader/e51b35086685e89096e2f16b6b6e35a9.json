{"ast":null,"code":"//pelo nex pode usar o import\nimport { GoogleSpreadsheet } from 'google-spreadsheet';\nimport credentials from '../../credentials.json'; //const { GoogleSpreadsheet } = require('google-spreadsheet')\n//const credentials = require('../../credentials.json')\n\nconst doc = new GoogleSpreadsheet('1RS3tQeiyuF9S25VHOLdkuCCMR8vQncxEuyXYg20wE-M');\nexport default (async (req, res) => {\n  try {\n    await doc.useServiceAccountAuth(credentials);\n    await doc.loadInfo();\n    console.log(doc.title);\n    const sheet = doc.sheetsByIndex[1];\n    await sheet.loadCells('A3:B3');\n    console.log(sheet.title);\n    const celpromo = sheet.getCell(2, 0);\n    console.log(celpromo.value);\n    const celltexto = sheet.getCell(2, 1);\n    console.log(celltexto.value);\n    res.end(JSON.stringify({\n      showCupon: celpromo.value === 'VERDADEIRO',\n      message: celltexto.value\n    }));\n  } catch (err) {\n    res.end(JSON.stringify({\n      showCupon: false,\n      message: ''\n    }));\n  }\n});","map":{"version":3,"sources":["H:/Projetos/palpit-box/pages/api/get-promo.js"],"names":["GoogleSpreadsheet","credentials","doc","req","res","useServiceAccountAuth","loadInfo","console","log","title","sheet","sheetsByIndex","loadCells","celpromo","getCell","value","celltexto","end","JSON","stringify","showCupon","message","err"],"mappings":"AACA;AACA,SAAQA,iBAAR,QAAgC,oBAAhC;AACA,OAAOC,WAAP,MAAwB,wBAAxB,C,CAEA;AACA;;AAGA,MAAMC,GAAG,GAAG,IAAIF,iBAAJ,CAAsB,8CAAtB,CAAZ;AAEA,gBAAe,OAAMG,GAAN,EAAUC,GAAV,KAAiB;AAE5B,MAAG;AACC,UAAMF,GAAG,CAACG,qBAAJ,CAA0BJ,WAA1B,CAAN;AACA,UAAMC,GAAG,CAACI,QAAJ,EAAN;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,KAAhB;AACA,UAAMC,KAAK,GAAGR,GAAG,CAACS,aAAJ,CAAkB,CAAlB,CAAd;AACA,UAAMD,KAAK,CAACE,SAAN,CAAgB,OAAhB,CAAN;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACD,KAAlB;AACA,UAAMI,QAAQ,GAAGH,KAAK,CAACI,OAAN,CAAc,CAAd,EAAiB,CAAjB,CAAjB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACE,KAArB;AACA,UAAMC,SAAS,GAAGN,KAAK,CAACI,OAAN,CAAc,CAAd,EAAgB,CAAhB,CAAlB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYQ,SAAS,CAACD,KAAtB;AAEAX,IAAAA,GAAG,CAACa,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,SAAS,EAAGP,QAAQ,CAACE,KAAT,KAAmB,YADZ;AAEnBM,MAAAA,OAAO,EAAGL,SAAS,CAACD;AAFD,KAAf,CAAR;AAIH,GAhBD,CAgBC,OAAMO,GAAN,EAAU;AACPlB,IAAAA,GAAG,CAACa,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,SAAS,EAAG,KADO;AAEnBC,MAAAA,OAAO,EAAM;AAFM,KAAf,CAAR;AAIH;AAEJ,CAzBD","sourcesContent":["\r\n//pelo nex pode usar o import\r\nimport {GoogleSpreadsheet} from 'google-spreadsheet'\r\nimport credentials from '../../credentials.json'\r\n\r\n//const { GoogleSpreadsheet } = require('google-spreadsheet')\r\n//const credentials = require('../../credentials.json')\r\n\r\n\r\nconst doc = new GoogleSpreadsheet('1RS3tQeiyuF9S25VHOLdkuCCMR8vQncxEuyXYg20wE-M')\r\n\r\nexport default async(req,res) =>{\r\n\r\n    try{\r\n        await doc.useServiceAccountAuth(credentials)\r\n        await doc.loadInfo()\r\n        console.log(doc.title)\r\n        const sheet = doc.sheetsByIndex[1]\r\n        await sheet.loadCells('A3:B3')\r\n        console.log(sheet.title)\r\n        const celpromo = sheet.getCell(2 ,0)\r\n        console.log(celpromo.value)\r\n        const celltexto = sheet.getCell(2,1)\r\n        console.log(celltexto.value)\r\n\r\n        res.end(JSON.stringify({\r\n            showCupon : celpromo.value === 'VERDADEIRO',\r\n            message : celltexto.value\r\n        }))\r\n    }catch(err){\r\n        res.end(JSON.stringify({\r\n            showCupon : false,\r\n            message :    ''    \r\n       }))\r\n    }\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}